import{S as he,i as ye,s as be,k as c,a as y,w as Ee,q as U,l as n,m as i,h as o,c as b,x as ge,r as B,n as l,O as _e,b as Ae,E as t,y as we,M as xe,f as je,t as De,z as qe,o as Ie}from"../../../chunks/index-023448eb.js";import{M as Le}from"../../../chunks/Music-0e0264ce.js";import{i as Se,c as Ve}from"../../../chunks/stores-27d4083a.js";import{a as Me}from"../../../chunks/axios-fadae37e.js";import{j as Ce}from"../../../chunks/index-0bb4da3b-16c29612.js";function $e(ne){let p,E,A,K,M,v,w,x,I,f,a,h,L,O,N,g,_,z,j,P,W,d,s,r,e,u,H,Z,F,ee,G,te,J,se,C,ae,$,q,S,re,le,V,oe,Q;return x=new Le({}),{c(){p=c("main"),E=c("div"),A=c("audio"),M=y(),v=c("div"),w=c("div"),Ee(x.$$.fragment),I=y(),f=c("h1"),a=U("Clique para come\xE7ar"),h=y(),L=c("p"),O=U("Toda a cidade foi contaminada desvie o maximo possivel"),N=y(),g=c("div"),_=c("h1"),z=U(`Score:
        `),j=c("span"),P=U("0"),W=y(),d=c("div"),s=c("div"),r=y(),e=c("div"),u=y(),H=c("div"),Z=y(),F=c("div"),ee=y(),G=c("div"),te=y(),J=c("div"),se=y(),C=c("div"),ae=y(),$=c("div"),q=c("div"),S=c("button"),re=U("left"),le=y(),V=c("button"),oe=U("right"),this.h()},l(D){p=n(D,"MAIN",{class:!0});var R=i(p);E=n(R,"DIV",{class:!0});var k=i(E);A=n(k,"AUDIO",{class:!0,src:!0}),i(A).forEach(o),M=b(k),v=n(k,"DIV",{class:!0});var T=i(v);w=n(T,"DIV",{class:!0});var ie=i(w);ge(x.$$.fragment,ie),ie.forEach(o),I=b(T),f=n(T,"H1",{class:!0});var de=i(f);a=B(de,"Clique para come\xE7ar"),de.forEach(o),h=b(T),L=n(T,"P",{class:!0});var ue=i(L);O=B(ue,"Toda a cidade foi contaminada desvie o maximo possivel"),ue.forEach(o),T.forEach(o),N=b(k),g=n(k,"DIV",{class:!0});var X=i(g);_=n(X,"H1",{class:!0});var ce=i(_);z=B(ce,`Score:
        `),j=n(ce,"SPAN",{id:!0,class:!0});var pe=i(j);P=B(pe,"0"),pe.forEach(o),ce.forEach(o),W=b(X),d=n(X,"DIV",{class:!0});var m=i(d);s=n(m,"DIV",{class:!0}),i(s).forEach(o),r=b(m),e=n(m,"DIV",{class:!0}),i(e).forEach(o),u=b(m),H=n(m,"DIV",{class:!0}),i(H).forEach(o),Z=b(m),F=n(m,"DIV",{class:!0}),i(F).forEach(o),ee=b(m),G=n(m,"DIV",{class:!0}),i(G).forEach(o),te=b(m),J=n(m,"DIV",{class:!0}),i(J).forEach(o),se=b(m),C=n(m,"DIV",{id:!0,class:!0}),i(C).forEach(o),m.forEach(o),X.forEach(o),k.forEach(o),ae=b(R),$=n(R,"DIV",{class:!0});var fe=i($);q=n(fe,"DIV",{class:!0});var Y=i(q);S=n(Y,"BUTTON",{"data-dir":!0,class:!0});var me=i(S);re=B(me,"left"),me.forEach(o),le=b(Y),V=n(Y,"BUTTON",{"data-dir":!0,class:!0});var ve=i(V);oe=B(ve,"right"),ve.forEach(o),Y.forEach(o),fe.forEach(o),R.forEach(o),this.h()},h(){l(A,"class","buzina-audio-html svelte-1lpjcbi"),_e(A.src,K="http://localhost:5173/src/lib/assets/sounds/buzina.mp3")||l(A,"src",K),l(w,"class","music svelte-1lpjcbi"),l(f,"class","svelte-1lpjcbi"),l(L,"class","svelte-1lpjcbi"),l(v,"class","container-wrapper svelte-1lpjcbi"),l(j,"id","score"),l(j,"class","svelte-1lpjcbi"),l(_,"class","most-score svelte-1lpjcbi"),l(s,"class","trash svelte-1lpjcbi"),l(e,"class","trash svelte-1lpjcbi"),l(H,"class","house svelte-1lpjcbi"),l(F,"class","house svelte-1lpjcbi"),l(G,"class","house svelte-1lpjcbi"),l(J,"class","house svelte-1lpjcbi"),l(C,"id","gameArea"),l(C,"class","svelte-1lpjcbi"),l(d,"class","content-game-area svelte-1lpjcbi"),l(g,"class","game-content svelte-1lpjcbi"),l(E,"class","container svelte-1lpjcbi"),l(S,"data-dir","ArrowLeft"),l(S,"class","svelte-1lpjcbi"),l(V,"data-dir","ArrowRight"),l(V,"class","svelte-1lpjcbi"),l(q,"class","svelte-1lpjcbi"),l($,"class","controll-game svelte-1lpjcbi"),l(p,"class","arcade-container svelte-1lpjcbi")},m(D,R){Ae(D,p,R),t(p,E),t(E,A),t(E,M),t(E,v),t(v,w),we(x,w,null),t(v,I),t(v,f),t(f,a),t(v,h),t(v,L),t(L,O),t(E,N),t(E,g),t(g,_),t(_,z),t(_,j),t(j,P),t(g,W),t(g,d),t(d,s),t(d,r),t(d,e),t(d,u),t(d,H),t(d,Z),t(d,F),t(d,ee),t(d,G),t(d,te),t(d,J),t(d,se),t(d,C),t(p,ae),t(p,$),t($,q),t(q,S),t(S,re),t(q,le),t(q,V),t(V,oe),Q=!0},p:xe,i(D){Q||(je(x.$$.fragment,D),Q=!0)},o(D){De(x.$$.fragment,D),Q=!1},d(D){D&&o(p),qe(x)}}}let Re="arcade";function ke(ne){var M,v,w;const p=Ce();let E=(M=p.currentUser)==null?void 0:M.displayName,A=(v=p.currentUser)==null?void 0:v.email,K=(w=p.currentUser)==null?void 0:w.uid;return Ie(()=>{const x=document.querySelector("#score"),I=document.querySelector(".container-wrapper"),f=document.querySelector("#gameArea");let a={speed:15,score:0},h={ArrowUp:!1,ArrowDown:!1,ArrowRight:!1,ArrowLeft:!1};I.addEventListener("click",W),document.addEventListener("keydown",z),document.addEventListener("keyup",j),document.querySelectorAll(".controll-game button").forEach(s=>{s.addEventListener("touchstart",r=>{h[r.srcElement.dataset.dir]=!0;let e=f.getBoundingClientRect();h.ArrowDown&&a.y<e.bottom-237&&(a.y+=a.speed)}),s.addEventListener("touchend",r=>{h[r.srcElement.dataset.dir]=!1})});function O(){document.querySelectorAll(".line").forEach(e=>r(e,a.speed));function r(e,u){e.y>1500&&(e.y-=1500),e.y+=u,e.style.top=e.y+"px"}}function N(s,r){let e=s.getBoundingClientRect(),u=r.getBoundingClientRect();return!(e.bottom<u.top||e.top>u.bottom||e.right<u.left||e.left>u.right)}function g(s){document.querySelectorAll(".drop").forEach(function(e){if(N(s,e)&&(P(),document.querySelectorAll(".trash").forEach(u=>{u.classList.remove("anim")}),document.querySelectorAll(".house").forEach(u=>{u.classList.remove("anim")})),e.y>1500){e.y=-600;const u=Math.floor(Math.random()*(f.clientWidth-50));e.style.left=u+"px"}e.y+=a.speed,e.style.top=e.y+"px"})}function _(){let s=document.querySelector(".car"),r=f.getBoundingClientRect();O(),g(s),a.start&&(h.ArrowUp&&a.y>r.top-542&&(a.y-=a.speed),h.ArrowDown&&a.y<r.bottom-237&&(a.y+=a.speed),h.ArrowLeft&&a.x>0&&(a.x-=a.speed),h.ArrowRight&&a.x<r.width-54&&(a.x+=a.speed),s.style.left=a.x+"px",s.style.top=a.y+"px",window.requestAnimationFrame(_),a.score++,x.innerText=a.score)}function z(s){if(s.preventDefault(),h[s.key]=!0,s.which===66&&a.start===!0){const r=document.querySelector(".buzina-audio-html");r.volume=.07,r.play()}}function j(s){s.preventDefault(),h[s.key]=!1}function P(){a.start=!1,I.classList.remove("hide"),Se.update(()=>!1),!p.currentUser.isAnonymous&&Me.post(`${Ve}/new-result`,{userName:E,userEmail:A,userID:K,modality:Re,userResult:a.score}).then(s=>{console.log(s)}).catch(s=>{console.log(s)})}function W(){I.classList.add("hide"),document.querySelectorAll(".trash").forEach(r=>{r.classList.add("anim")}),document.querySelectorAll(".house").forEach(r=>{r.classList.add("anim")}),f.innerHTML="",a.start=!0,a.score=0;for(let r=0;r<10;r++){let e=document.createElement("div");e.classList.add("line"),e.y=r*150,e.style.top=r*150+"px",f.appendChild(e)}window.requestAnimationFrame(_);let s=document.createElement("div");s.setAttribute("class","car"),f.appendChild(s),a.x=s.offsetLeft,a.y=s.offsetTop;for(let r=0;r<3;r++){let e=document.createElement("div");e.classList.add("drop"),e.y=(r+1)*600*-1,e.style.top=e.y+"px";const u=Math.floor(Math.random()*(f.clientWidth-e.clientWidth));e.style.left=u+"px",e.style.backgroundImage=d(),f.appendChild(e)}}function d(){return"url('http://localhost:5173/src/lib/assets/images/icons/organico-"+Math.floor(Math.random()*5)+".png')"}}),[]}class ze extends he{constructor(p){super(),ye(this,p,ke,$e,be,{})}}export{ze as default};
