import{S as le,i as oe,s as ne,k as S,a as x,q as O,w as U,l as k,m as M,c as C,r as F,h as b,x as X,n as T,b as ie,E as n,y as B,f as w,t as D,d as Y,u as Z,z as J,o as ue,g as ee}from"../../../chunks/index-023448eb.js";import{b as ce,g as te}from"../../../chunks/navigation-09c71f38.js";import{i as ae,a as de,t as q,c as fe}from"../../../chunks/stores-27d4083a.js";import{j as me,k as he}from"../../../chunks/index-0bb4da3b-16c29612.js";import{a as pe}from"../../../chunks/axios-fadae37e.js";import{M as ve,O as _e}from"../../../chunks/Overlay-6691ab73.js";import{C as ge}from"../../../chunks/Cloud-f6a0d783.js";function se(p){let t,a;return t=new ve({props:{score:p[0],displayName:"Aventura",preGame:"adventure"}}),{c(){U(t.$$.fragment)},l(e){X(t.$$.fragment,e)},m(e,i){B(t,e,i),a=!0},p(e,i){const m={};i&1&&(m.score=e[0]),t.$set(m)},i(e){a||(w(t.$$.fragment,e),a=!0)},o(e){D(t.$$.fragment,e),a=!1},d(e){J(t,e)}}}function re(p){let t,a;return t=new _e({}),{c(){U(t.$$.fragment)},l(e){X(t.$$.fragment,e)},m(e,i){B(t,e,i),a=!0},i(e){a||(w(t.$$.fragment,e),a=!0)},o(e){D(t.$$.fragment,e),a=!1},d(e){J(t,e)}}}function ye(p){let t,a,e,i,m,_,y,u,d,$,N,g,A,H,P,s,G,r,I,l,L,h,V,o=p[2]&&se(p),c=p[2]&&re();return h=new ge({}),{c(){t=S("main"),o&&o.c(),a=x(),e=S("div"),c&&c.c(),i=x(),m=S("div"),_=S("h2"),y=O("Pontua\xE7\xE3o"),u=x(),d=S("h3"),$=O(p[0]),N=x(),g=S("div"),A=S("h2"),H=O("Faltas"),P=x(),s=S("h3"),G=O(p[1]),r=O("/7"),I=x(),l=S("div"),L=x(),U(h.$$.fragment),this.h()},l(f){t=k(f,"MAIN",{class:!0});var v=M(t);o&&o.l(v),a=C(v),e=k(v,"DIV",{class:!0});var E=M(e);c&&c.l(E),i=C(E),m=k(E,"DIV",{class:!0});var j=M(m);_=k(j,"H2",{class:!0});var K=M(_);y=F(K,"Pontua\xE7\xE3o"),K.forEach(b),u=C(j),d=k(j,"H3",{class:!0});var Q=M(d);$=F(Q,p[0]),Q.forEach(b),j.forEach(b),N=C(E),g=k(E,"DIV",{class:!0});var z=M(g);A=k(z,"H2",{class:!0});var W=M(A);H=F(W,"Faltas"),W.forEach(b),P=C(z),s=k(z,"H3",{class:!0});var R=M(s);G=F(R,p[1]),r=F(R,"/7"),R.forEach(b),z.forEach(b),I=C(E),l=k(E,"DIV",{class:!0}),M(l).forEach(b),L=C(E),X(h.$$.fragment,E),E.forEach(b),v.forEach(b),this.h()},h(){T(_,"class","svelte-1uyodxv"),T(d,"class","svelte-1uyodxv"),T(m,"class","score svelte-1uyodxv"),T(A,"class","svelte-1uyodxv"),T(s,"class","svelte-1uyodxv"),T(g,"class","faults svelte-1uyodxv"),T(l,"class","sun-and-moon"),T(e,"class","card game-card diurnal svelte-1uyodxv"),T(t,"class","page svelte-1uyodxv")},m(f,v){ie(f,t,v),o&&o.m(t,null),n(t,a),n(t,e),c&&c.m(e,null),n(e,i),n(e,m),n(m,_),n(_,y),n(m,u),n(m,d),n(d,$),n(e,N),n(e,g),n(g,A),n(A,H),n(g,P),n(g,s),n(s,G),n(s,r),n(e,I),n(e,l),n(e,L),B(h,e,null),V=!0},p(f,[v]){f[2]?o?(o.p(f,v),v&4&&w(o,1)):(o=se(f),o.c(),w(o,1),o.m(t,a)):o&&(ee(),D(o,1,1,()=>{o=null}),Y()),f[2]?c?v&4&&w(c,1):(c=re(),c.c(),w(c,1),c.m(e,i)):c&&(ee(),D(c,1,1,()=>{c=null}),Y()),(!V||v&1)&&Z($,f[0]),(!V||v&2)&&Z(G,f[1])},i(f){V||(w(o),w(c),w(h.$$.fragment,f),V=!0)},o(f){D(o),D(c),D(h.$$.fragment,f),V=!1},d(f){f&&b(t),o&&o.d(),c&&c.d(),J(h)}}}let Ee="adventure";function be(p,t,a){let e=1300,i=5e3,m="",_="",y="",u=0,d=7,$=!1;const N=me();let g="",A="",H="";ce(()=>{a(2,$=!0),ae.update(s=>!1)});const P=()=>{const s=[...q.trashs.eletronic,...q.trashs.glass,...q.trashs.metal,...q.trashs.organic,...q.trashs.paper,...q.trashs.plastic];(()=>{const r=Math.round(Math.random()*30);let I=Math.round(Math.random()*100);I>90&&(I=90),I<5&&(I=5),m=s[r];const l=document.createElement("div");l.classList.add("item-desc",m),r<5?l.setAttribute("data-trash","electronic"):r>4&&r<10?l.setAttribute("data-trash","glass"):r>9&&r<15?l.setAttribute("data-trash","metal"):r>14&&r<20?l.setAttribute("data-trash","organic"):r>19&&r<25?l.setAttribute("data-trash","paper"):r>24&&r<30&&l.setAttribute("data-trash","plastic"),l.style.left=`${I}%`,l.animate([{top:"0"},{top:"100%"}],{duration:i,fill:"forwards"});let L;L=setTimeout(()=>{l.remove(),l.dataset.trash===_&&(u>0&&a(0,u=u-3),d>0&&a(1,d--,d))},i),y.appendChild(l),l.addEventListener("touchstart",h=>{h.target.dataset.trash===_?a(0,u=u+3):(u>0&&a(0,u=u-3),d>0&&a(1,d--,d)),h.target.remove(),clearTimeout(L),e>200&&(e=e-50),i>700&&(i=i-50)}),l.addEventListener("mousedown",h=>{h.target.dataset.trash===_?a(0,u=u+3):(u>0&&a(0,u=u-3),d>0&&a(1,d--,d)),h.target.remove(),clearTimeout(L),e>200&&(e=e-50),i>700&&(i=i-50)})})(),setTimeout(()=>{if(!$)if(d>0){P();return}else{if(ae.update(r=>!1),a(2,$=!0),N.currentUser.isAnonymous)return;pe.post(`${fe}/new-result`,{userName:g,userEmail:A,userID:H,modality:Ee,userResult:u}).then(r=>{console.log(r)}).catch(r=>{console.log(r)})}},e)};return ue(()=>{he(N,s=>{s&&(g=s.displayName,A=s.email,H=s.uid)}),y=document.querySelector(".game-card"),y.addEventListener("mousedown",()=>{y.classList.add("clicked")}),y.addEventListener("mouseup",()=>{y.classList.remove("clicked")}),de.subscribe(s=>{if(!s.data.dumpsterSelected){te("/");return}if(!s.data.dumpsterSelected[0]||!s.data.dumpsterSelected[0]===null||!s.data.dumpsterSelected[0]===void 0||!s.data.dumpsterSelected[0]===""){te("/");return}_=s.data.dumpsterSelected[0],P()})}),[u,d,$]}class we extends le{constructor(t){super(),oe(this,t,be,ye,ne,{})}}export{we as default};
